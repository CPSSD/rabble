syntax = "proto3";

option go_package = "services/proto";

import "services/proto/database.proto";

message SearchQuery {
  string query_text = 1;
}

message SearchRequest {
  SearchQuery query = 1;
}

message SearchResponse {
  repeated PostsEntry results = 1;
}

message IndexRequest {
  PostsEntry post = 1;
}

message IndexResponse {
  enum ResultType {
    OK = 0;
    ERROR = 1;
  }
  ResultType result_type = 1;
  string error = 2;
}

service Search {
  rpc Search(SearchRequest) returns (SearchResponse);
  rpc Index(IndexRequest) returns (IndexResponse);
}
